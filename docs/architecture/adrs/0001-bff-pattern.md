# 1. Использование BFF Pattern для аутентификации

Date: 2024-01-15

## Status

Accepted

## Context

Необходимо обеспечить безопасное хранение OAuth2 токенов и защиту от XSS атак.

## Decision

Использовать Backend-for-Frontend (BFF) pattern:
- Access/Refresh токены хранятся на сервере в Redis
- Фронтенд получает только HTTP-only session cookies
- BFF проксирует запросы к API, добавляя JWT

## Consequences

**Положительные:**
- Токены недоступны из JavaScript (защита от XSS)
- Автоматический refresh токенов на сервере
- Централизованное управление сессиями

**Отрицательные:**
- Дополнительный компонент инфраструктуры
- Все запросы проходят через BFF
